# fractal color shifting

## overview
[fractals](https://en.wikipedia.org/wiki/Fractal) are mathematical objects whose jaggedness (formally, hausdorff dimension) is greater than that of a typical shape in whatever dimension we're studying (euclidean dimension). fractals are generally self-similar or have a recursive structure ([but this is not a necessary condition](https://www.youtube.com/watch?v=gB9n2gHsHN4)). 

two famous fractals are the julia set and the mandelbrot set, both of which are self-similar. these fractals are generated by repeatedly applying a function _f(z) = zÂ² + c_ to a point on the complex plane. if the sequence of values generated by this process diverges off to infinity, the initial point is excluded from the set. in applying this criterion, we can see how quickly points in different regions of the complex plane diverge or converge: 

```python
from PIL import Image

from glitchcraft.fractal import colorshift

output_dir = Path("../artifacts/output/fractals")
output_dir.mkdir(exist_ok=True)

blank = Image.new("RGB", src.size, color="white")
colorshift(blank, normalization=3).save(output_dir/"julia.png")
```

<div align="center">
<img src=../artifacts/output/fractals/julia.png width="256">
</div>

in the image above, the number of iterations before convergence is mapped to a color. instead of starting with a blank value of `(255, 255, 255)`, we can use a pixel's intensity as a starting value, which is what the `colorshift` function, when applied to an image, will do

## examples
```python
for (cx, cy) in [
    (-1, 1),         # default
    (-0.7, 0.27015), # julia  
    (2.2, 1.5)       # mandelbrot
]: 
    for normalization in [3, 6, 9]:
        print(normalization, cx, cy)
        colorshift(src, normalization=normalization, cx=cx, cy=cy).save(output_dir/("stream_shifted_{}_{}_{}.png".format(normalization, cx, cy)))
```
starting with this initial image, we can vary the fractal colorshift parameters:
<div align="center"><img src="../artifacts/input/stream_square.png" width="256"></div>

varying the starting point of the convergence search (`(cx, cy)`) and the initial intensity mapping (`normalization`) produces these results:

| `(cx, cy)`          | `(-1, 1)`     | `(-0.7, 0.27015)` | `(2.2, 1.5)` |
|:-------------------:|:-------------:|:-----------------:|:------------:|
| `normalization = 3` | <img src="../artifacts/output/fractals/stream_shifted_3_-1_1.png" width="200"> | <img src="../artifacts/output/fractals/stream_shifted_3_-0.7_0.27015.png" width="200"> | <img src="../artifacts/output/fractals/stream_shifted_3_2.2_1.5.png" width="200"> | 
| `normalization = 6` | <img src="../artifacts/output/fractals/stream_shifted_6_-1_1.png" width="200"> | <img src="../artifacts/output/fractals/stream_shifted_6_-0.7_0.27015.png" width="200"> | <img src="../artifacts/output/fractals/stream_shifted_6_2.2_1.5.png" width="200"> | 
| `normalization = 9` | <img src="../artifacts/output/fractals/stream_shifted_9_-1_1.png" width="200"> | <img src="../artifacts/output/fractals/stream_shifted_9_-0.7_0.27015.png" width="200"> | <img src="../artifacts/output/fractals/stream_shifted_9_2.2_1.5.png" width="200"> | 


